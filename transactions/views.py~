# Create your views here.
from django.shortcuts import render_to_response
from transactions.models import Transaction
from transactions.models import Connected_Account
from transactions.models import Bank
from transactions.models import State
from transactions.models import Branch
from transactions.models import Account
from transactions.models import Bank_Account
from django.http import HttpResponseRedirect
from django.template import RequestContext
from django.http import HttpResponse

def login(request):
    return render_to_response("login.html")

def interbankoption(request):
    return render_to_response("/interbank_transfer2/")

def home(request):
  try:
    user_id = request.POST["user_id"]
    user = Account.objects.get(username=user_id)
    if user.password == request.POST["passwd"]:
        request.session['user_id'] = user.user_id
        request.session['username'] = user.username
        return render_to_response("home.html",context_instance=RequestContext(request))
    else:
        return HttpResponseRedirect("/Online_transactions/")
  except Account.DoesNotExist:
        return HttpResponseRedirect("/Online_transactions/")
        
        
def show_funds_transfer(request):
#  if(request.session)
    id=request.session.get('user_id')
    user_accounts = Bank_Account.objects.filter(ba_user_id=id)
    return render_to_response("funds_transfer.html",{'user_accounts':user_accounts})
#  endif
#  return render_to_response("login.html")

def show_interbank_transfer(request):
    id=request.session.get('user_id')
    user_accounts = Bank_Account.objects.filter(ba_user_id=id)
    return render_to_response("interbank_transfer.html",{'user_accounts':user_accounts})
#    return render_to_response("login.html")

def show_thirdparty_transfer(request):
    return render_to_response("login.html")
